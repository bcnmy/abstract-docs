import{r as h,j as e,u as O}from"./index-ZQOw4TQ3.js";import{u as L}from"./codeblock-D2ZsqJVx.js";function v(){const[o,s]=h.useState(null),[x,m]=h.useState(null),{register:i,handleSubmit:y,watch:j,formState:{errors:a}}=L(),f=j("mode"),u=j("smartAccountName"),S=r=>{if(u==="BICONOMY")return r==="1.0.0"||r==="2.0.0"?!0:"Version 1.4.1 only supported on SAFE";if(u==="INFINITISM")return r==="1.0.0"?!0:r==="2.0.0"?"Version 2.0.0 only supported on BICONOMY":"Version 1.4.1 only supported on SAFE";if(u==="SAFE"){if(r==="1.4.1")return!0;if(r==="1.0.0")return"Version 1.0.0 only supported on BICONOMY or INFINITISM";if(r==="2.0.0")return"Version 2.0.0 only supported on BICONOMY"}return!0},b=r=>{try{return JSON.parse(r),!0}catch{return"Invalid JSON object please check the entered UserOp"}},I=r=>{const c=/https:\/\/paymaster\.biconomy\.io\/api\/v[12]\/(\d+)/,t=r.match(c);if(t!=null&&t[1]){const l=Number.parseInt(t[1],10),p=[1,80002,137,97,56,1442,1101,42161,42170,420,10,43113,43114,84531,8453,59140,59144,5e3,5001,204,5611,88888,592,88882,81,1115,1116,169,3441005,91715,9980,421614,11155111,84532,168587773,80085,81457,534351,534352,56400,7e3,11155420].includes(l);if(p)return!0;if(!p)return"Only testnet chains are allowed in explorer"}return"Paymaster URL incorrect"};function g(r){return r.trim().split(/\s*,\s*/)}const F=r=>{console.log("Form Data Submitted:",r),console.log(JSON.parse(r.userOp));const c=JSON.parse(r.userOp);if(r.mode==="SPONSORED"){const t={jsonrpc:"2.0",method:r.method,id:1,params:[{...c},{mode:r.mode,sponsorshipInfo:{webhookData:{},smartAccountInfo:{name:r.smartAccountName,version:r.smartAccountVersion}}}]};r.method==="pm_sponsorUserOperation"&&(t.params[1].expiryDuration=300,t.params[1].calculateGasLimits=!0);const l=JSON.stringify(t,null,2);m(l);const d=new Headers;d.append("Content-Type","application/json");const p={method:"POST",headers:d,body:l};fetch(r.paymasterUrl,p).then(n=>n.json()).then(n=>s(n)).catch(n=>s(n))}else if(r.mode==="ERC20"){const t={jsonrpc:"2.0",method:"pm_getFeeQuoteOrData",id:1,params:[{...c},{mode:"ERC20",tokenInfo:{preferredToken:r.preferredToken,tokenList:g(r.tokenList)}}]};r.method==="pm_sponsorUserOperation"&&(t.params[1].expiryDuration=300,t.params[1].calculateGasLimits=!0);const l=JSON.stringify(t,null,2);m(l);const d=new Headers;d.append("Content-Type","application/json");const p={method:"POST",headers:d,body:l};fetch(r.paymasterUrl,p).then(n=>n.json()).then(n=>s(n)).catch(n=>s(n))}};return h.useEffect(()=>{const r=JSON.stringify({jsonrpc:"2.0",method:"pm_getFeeQuoteOrData",id:1,params:[{sender:"0x0000000000000000000000000000000000000000",nonce:"0x",initCode:"0x",callData:"0x",signature:"0x",maxFeePerGas:"0x",maxPriorityFeePerGas:"0x",verificationGasLimit:"0x",callGasLimit:"0x",preVerificationGas:"0x",paymasterAndData:"0x"},{mode:"SPONSORED",sponsorshipInfo:{webhookData:{},smartAccountInfo:{name:"BICONOMY",version:"1.0.0"}}}]},null,2);m(r)},[]),e.jsxs("div",{children:[e.jsxs("div",{className:"requestContainer",children:[e.jsxs("div",{className:"formContainer",children:[e.jsx("h2",{children:"Edit Request"}),e.jsxs("form",{onSubmit:y(F),children:[e.jsx("label",{className:"inputLabel",children:"Method"}),e.jsxs("select",{...i("method",{required:!0}),className:"inputField",children:[e.jsx("option",{value:"pm_getFeeQuoteOrData",children:"pm_getFeeQuoteOrData"}),e.jsx("option",{value:"pm_sponsorUserOperation",children:"pm_sponsorUserOperation"})]}),e.jsx("label",{className:"inputLabel",children:"Paymaster URL"}),e.jsx("input",{...i("paymasterUrl",{required:"Paymaster URL is required",validate:r=>I(r)}),type:"text",placeholder:"Paymaster URL",className:"inputField"}),a.paymasterUrl&&e.jsx("p",{className:"errorMsg",children:a.paymasterUrl.message}),e.jsx("label",{className:"inputLabel",children:"UserOp"}),e.jsx("textarea",{...i("userOp",{required:"UserOp object is required",validate:r=>b(r)}),placeholder:"UserOp Object",className:"inputField",rows:5}),a.userOp&&e.jsx("p",{className:"errorMsg",children:a.userOp.message}),e.jsx("label",{className:"inputLabel",children:"Paymaster Mode"}),e.jsxs("select",{...i("mode",{required:!0}),className:"inputField",children:[e.jsx("option",{value:"SPONSORED",children:"SPONSORED"}),e.jsx("option",{value:"ERC20",children:"ERC20"})]}),e.jsx("label",{className:"inputLabel",children:"Smart Account Name"}),e.jsxs("select",{...i("smartAccountName",{required:!0}),className:"inputField",children:[e.jsx("option",{value:"BICONOMY",children:"BICONOMY"}),e.jsx("option",{value:"INFINITISM",children:"INFINITISM"}),e.jsx("option",{value:"SAFE",children:"SAFE"})]}),e.jsx("label",{className:"inputLabel",children:"Smart Account Version"}),e.jsxs("select",{...i("smartAccountVersion",{validate:r=>S(r)}),className:"inputField",children:[e.jsx("option",{value:"1.0.0",children:"1.0.0"}),e.jsx("option",{value:"1.4.1",children:"1.4.1"}),e.jsx("option",{value:"2.0.0",children:"2.0.0"})]}),a.smartAccountVersion&&e.jsx("p",{className:"errorMsg",children:a.smartAccountVersion.message}),f==="ERC20"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"inputLabel",children:"Preferred Token"}),e.jsx("input",{...i("preferredToken",{required:"Preferred token address is required"}),type:"text",placeholder:"Preferred Token Address",className:"inputField"})]}),a.preferredToken&&e.jsx("p",{className:"errorMsg",children:a.preferredToken.message}),f==="ERC20"&&e.jsxs(e.Fragment,{children:[e.jsx("label",{className:"inputLabel",children:"Token List"}),e.jsx("input",{...i("tokenList"),type:"text",placeholder:"Token List (comma separated)",className:"inputField"})]}),a.tokenList&&e.jsx("p",{className:"errorMsg",children:a.tokenList.message}),e.jsx("button",{type:"submit",className:"submitButton",children:"Submit"})]})]}),x&&e.jsxs("div",{children:[e.jsx("h2",{children:"Sample Request"}),e.jsx("pre",{children:e.jsx("code",{className:"hljs requestBlock",children:x})})]})]}),o&&e.jsxs("div",{children:[e.jsx("h2",{children:"Sample Response"}),e.jsx("pre",{children:e.jsx("code",{className:"hljs",children:`${JSON.stringify(o,null,2)}`})})]})]})}const E={title:"Explorer",description:"undefined"};function N(o){const s={a:"a",aside:"aside",div:"div",h1:"h1",header:"header",p:"p",...O(),...o.components};return e.jsxs(e.Fragment,{children:[e.jsx(s.header,{children:e.jsxs(s.h1,{id:"explorer",children:["Explorer",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#explorer",children:e.jsx(s.div,{"data-autolink-icon":!0})})]})}),`
`,`
`,e.jsx(s.header,{children:e.jsxs(s.h1,{id:"paymaster-api-explorer",children:["Paymaster API Explorer",e.jsx(s.a,{"aria-hidden":"true",tabIndex:"-1",href:"#paymaster-api-explorer",children:e.jsx(s.div,{"data-autolink-icon":!0})})]})}),`
`,e.jsx(s.aside,{"data-callout":"info",children:e.jsxs(s.p,{children:["You will need a paymaster URL from your ",e.jsx(s.a,{href:"https://dashboard.biconomy.io/",children:"dashboard"})," to use the explorer. Create a userOp and paste it below to begin"]})}),`
`,e.jsx(v,{})]})}function k(o={}){const{wrapper:s}={...O(),...o.components};return s?e.jsx(s,{...o,children:e.jsx(N,{...o})}):N(o)}export{k as default,E as frontmatter};
