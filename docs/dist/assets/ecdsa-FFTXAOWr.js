import{u as r,j as s}from"./index-ZQOw4TQ3.js";const l={title:"ECDSA Ownership Module",description:"undefined"};function n(i){const e={a:"a",aside:"aside",code:"code",div:"div",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",ul:"ul",...r(),...i.components};return s.jsxs(s.Fragment,{children:[s.jsx(e.header,{children:s.jsxs(e.h1,{id:"ecdsa-ownership-module",children:["ECDSA Ownership Module",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#ecdsa-ownership-module",children:s.jsx(e.div,{"data-autolink-icon":!0})})]})}),`
`,s.jsxs(e.h2,{id:"what-is-it-",children:["What is it? ü§î",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#what-is-it-",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["The ",s.jsx(e.strong,{children:"ECDSA Ownership Registry Module"})," or ",s.jsx(e.strong,{children:"ECDSA Validation Module"})," is integral to ",s.jsx(e.strong,{children:"Biconomy's Modular Smart Account"}),", enhancing transaction security and user authentication. This document outlines its functionality, benefits, and use cases."]}),`
`,s.jsxs(e.h3,{id:"what-is-the-ecdsa-ownership-module-",children:["What is the ECDSA Ownership Module? ü§î",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#what-is-the-ecdsa-ownership-module-",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["This module allows ",s.jsx(e.strong,{children:"Externally Owned Accounts (EOAs)"})," to authorize and sign user operations (UserOps) for Smart Account. It operates similarly to non-modular Smart Account ownership but is reconstructed as a ",s.jsx(e.strong,{children:"Validation Module"})," within the ",s.jsx(e.strong,{children:"Account Abstraction + Modular Smart Accounts"})," ecosystem."]}),`
`,s.jsx(e.aside,{"data-callout":"tip",children:s.jsx(e.p,{children:"The ECDSA Validation Module is the standard choice for Biconomy Modular Smart Accounts unless another module is chosen during setup. It makes things easier for users and helps manage ownership smoothly."})}),`
`,s.jsxs(e.h4,{id:"key-functions-",children:["Key Functions üîê",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#key-functions-",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"Single Signer Simplicity"}),": Offers 1/1 multisig, single-signature control, ideal for both Web2 users and crypto-native users who already possess an EOA wallet."]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"ECDSA Signature Scheme"}),": Utilizes the ECDSA secp256k1 curve for secure signing."]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"Flexible Owner Authentication"}),": Supports various signer solutions like Privy, Fireblocks, Arcana Auth, Web3Auth, Magic, Capsule, Turnkey or Particle."]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"EIP-1271 Compliance"}),": Allowing Smart Accounts to sign Ethereum messages for logging into dApps."]}),`
`]}),`
`,s.jsx(e.aside,{"data-callout":"info",children:s.jsx(e.p,{children:"One of the most popular modules, it bridges the ease of traditional web logins with the security of blockchain technology."})}),`
`,s.jsxs(e.h4,{id:"use-cases-",children:["Use Cases üåü",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#use-cases-",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.ol,{children:[`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"Secure Transaction Signing"}),": EOAs can securely authorize transactions for Smart Accounts."]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"dApp Interaction"}),": Simplifies the process of logging into dApps using Ethereum messages thanks to EIP-1271 support."]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"Ownership Management"}),": Mirrors traditional ownership systems, providing a familiar framework within a more advanced blockchain setting."]}),`
`]}),`
`,s.jsxs(e.h2,{id:"sdk-guide-",children:["SDK Guide üìò",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#sdk-guide-",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.h3,{id:"initializing-ecdsa-module-",children:["Initializing ECDSA Module üåü",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#initializing-ecdsa-module-",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(e.p,{children:"There is no need to do anything in order to use ECDSAOwnershipValidationModule, this module is set by default on every smart account."}),`
`,s.jsx(e.strong,{children:"Usage"}),`
`,s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"  createECDSAOwnershipValidationModule,"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"  createSmartAccountClient,"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"} "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),s.jsx(e.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "@biconomy/accounts"'}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"const"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" ecdsaModuleConfig"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" { signer };"})]}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"const"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" defaultValidationModule"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" await"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" createECDSAOwnershipValidationModule"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"  ecdsaModuleConfig"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Signer for smart account taken from the module"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"const"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" smartAccount"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" await"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" createSmartAccountClient"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"({"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"  bundlerUrl,"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"  defaultValidationModule, "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Alternatively this can be ommitted, as it is the default validation module used when accounts are created"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"});"})}),`
`,s.jsx(e.span,{className:"line","data-empty-line":!0,children:" "}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"const"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" saModuleAddress"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" await"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" smartAccount.activeValidationModule."}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"getAddress"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"();"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"console."}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"log"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(saModuleAddress "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"==="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" defaultValidationModule.moduleAddress); "}),s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// true"})]})]})}),`
`,s.jsx(e.strong,{children:"Parameters"}),`
`,s.jsx(e.p,{children:s.jsx(e.em,{children:"required params are explicitly mentioned"})}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:["signer(",s.jsx(e.code,{children:"Signer"}),", required): Pass the signer instance into the validation module which gets used to detect owner of the smart account."]}),`
`,s.jsxs(e.li,{children:["entryPointAddress(",s.jsx(e.code,{children:"Hex"}),"): Defaults to ",s.jsx(e.code,{children:'"0x5ff137d4b0fdcd49dca30c7cf57e578a026d2789"'})]}),`
`,s.jsxs(e.li,{children:["moduleAddress(",s.jsx(e.code,{children:"Hex"}),"): Defaults to ",s.jsx(e.code,{children:'"0x0000001c5b32F37F5beA87BDD5374eB2aC54eA8e"'})]}),`
`,s.jsxs(e.li,{children:["version(ModuleVersion): Defaults to ",s.jsx(e.code,{children:'"V1_0_0"'})]}),`
`]}),`
`,s.jsx(e.strong,{children:"Returns"}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:[s.jsx(e.code,{children:"ecdsaOwnershipValidationModule"})," (",s.jsx(e.code,{children:"ECDSAOwnershipValidationModule"}),"): An instance of the Biconomy ECDSA ownership validation module."]}),`
`]}),`
`,s.jsx(e.aside,{"data-callout":"info",children:s.jsx(e.p,{children:"The Smart Account's address is counterfactually generated based on the signer's public key, which is the owner's address used in the ECDSA Module. This feature allows for the pre-calculation of the account address before deployment."})}),`
`,s.jsx(e.aside,{"data-callout":"warning",children:s.jsx(e.p,{children:"To deploy the same Smart Account (with the same address) on different chains, it's crucial to use the same module address, the same initialization data (here, the owner's EOA address) for the ECDSA Module here and the index. This ensures consistency in the account's address across various blockchains."})}),`
`,s.jsxs(e.h2,{id:"smart-contract-deep-dive-Ô∏è",children:["Smart Contract Deep Dive üõ†Ô∏è",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#smart-contract-deep-dive-Ô∏è",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["This section dives into the ",s.jsx(e.code,{children:"EcdsaOwnershipRegistryModule"})," for Biconomy Smart Accounts, focusing on key functionalities and security aspects."]}),`
`,s.jsxs(e.h3,{id:"core-functionalities",children:["Core Functionalities",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#core-functionalities",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.h4,{id:"user-operation-validation-validateuserop-Ô∏è",children:["User Operation Validation (",s.jsx(e.code,{children:"validateUserOp"}),") üõ°Ô∏è",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#user-operation-validation-validateuserop-Ô∏è",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Validates user operations signed by an EOA"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" validateUserOp"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        UserOperation"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" calldata"}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" userOp"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"        bytes32"}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" userOpHash"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    ) "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"external"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" view"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" virtual"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" override"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" returns"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"uint256"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        if"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"            _verifySignature"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                userOpHash,"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                userOp.signature["}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"96"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"161"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"],"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"                userOp.sender"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"            )"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        ) {"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"            return"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" VALIDATION_SUCCESS;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        }"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        return"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" SIG_VALIDATION_FAILED;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})})]})}),`
`,s.jsxs(e.aside,{"data-callout":"note",children:[s.jsx(e.p,{children:"Objective: The function safeguards the authenticity of user operations on Smart Accounts."}),s.jsx(e.p,{children:"Method: It specifically decodes and verifies a segment of the userOp.signature. This segmentation is crucial because userOp.signature contains both the signature and the validation module's address. By extracting only the signature part, the function accurately validates the operation against the intended owner's signature, ensuring that the operation is legitimately authorized."})]}),`
`,s.jsxs(e.h4,{id:"signature-verification-_verifysignature-",children:["Signature Verification (",s.jsx(e.code,{children:"_verifySignature"}),") üîê",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#signature-verification-_verifysignature-",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// Internal function to verify the signature of a smart account"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" _verifySignature"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes32"}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" dataHash"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" memory"}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" signature"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"address"}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" smartAccount"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    internal"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" view"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" returns"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bool"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" expectedSigner "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" _smartAccountOwners[smartAccount];"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Reverts if no owner is registered"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    if"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" (expectedSigner "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"=="}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"0"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")) {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        revert"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" NoOwnerRegisteredForSmartAccount"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(smartAccount);"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"    // Checks for signature length and recovers the signer"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    if"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" (signature.length "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"<"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" 65"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"revert"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" WrongSignatureLength"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"();"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    address"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" recovered "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" (dataHash."}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"toEthSignedMessageHash"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"())."}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"recover"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(signature);"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    if"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" (expectedSigner "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"=="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" recovered) {"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"        return"}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" true"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    recovered "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" dataHash."}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"recover"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(signature);"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    return"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" expectedSigner "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"=="}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" recovered;"})]}),`
`,s.jsx(e.span,{className:"line",children:s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})}),`
`,s.jsx(e.strong,{children:"Validates a signature against a data hash and registered owner, supporting EIP-1271 standard."}),`
`,s.jsx(e.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:s.jsxs(e.code,{children:[s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"function"}),s.jsx(e.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" isValidSignature"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    bytes32"}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" dataHash"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"    bytes"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" memory"}),s.jsx(e.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:" signature"})]}),`
`,s.jsxs(e.span,{className:"line",children:[s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:") "}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"public"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" view"}),s.jsx(e.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" returns"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("}),s.jsx(e.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"bytes4"}),s.jsx(e.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:");"})]})]})}),`
`,s.jsx(e.aside,{"data-callout":"note",children:s.jsxs(e.p,{children:[s.jsx(e.code,{children:"isValidSignature"})," serves as a key function for external smart contracts to verify signature authenticity."]})}),`
`,s.jsx(e.div,{children:s.jsxs(e.p,{children:["Proper handling and verification of signatures are crucial for maintaining the integrity of the Smart Account. The ",s.jsx(e.code,{children:"isValidSignature"})," function is essential for EIP-1271 support, validating that the signature matches the expected signer as per the EIP-1271 standard."]})}),`
`,s.jsxs(e.h3,{id:"security-considerations",children:["Security Considerations",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#security-considerations",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"Strict Ownership Rules"}),": Only Externally Owned Accounts (EOAs) can authorize transactions, ensuring secure control over Smart Account operations."]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"Signature Verification"}),": Implements robust methods for signature validation, crucial for preventing unauthorized access."]}),`
`]}),`
`,s.jsx(e.aside,{"data-callout":"info",children:s.jsxs(e.p,{children:["The ",s.jsx(e.code,{children:"initForSmartAccount"})," method doesn't include ",s.jsx(e.code,{children:"isSmartContract"})," checks due to operational constraints. However, this doesn't compromise security as operations require valid EOA signatures. This ensures Smart Accounts remain secure within their operational framework."]})}),`
`,s.jsxs(e.h3,{id:"interaction-with-smart-accounts-",children:["Interaction with Smart Accounts ü§ù",s.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#interaction-with-smart-accounts-",children:s.jsx(e.div,{"data-autolink-icon":!0})})]}),`
`,s.jsxs(e.p,{children:["The ",s.jsx(e.code,{children:"EcdsaOwnershipRegistryModule"})," interacts with Smart Accounts primarily through its core functionalities:"]}),`
`,s.jsxs(e.ul,{children:[`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"Initialization and Ownership"}),": During deployment, Smart Accounts use ",s.jsx(e.code,{children:"init"})," method to invoke ",s.jsx(e.code,{children:"initForSmartAccount"})," on modules, setting initial ownership and configurations."]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"User Operation Validation"}),": When a Smart Account attempts to perform an operation, ",s.jsx(e.code,{children:"validateUserOp"})," is invoked to ensure the action is authorized by the registered owner."]}),`
`,s.jsxs(e.li,{children:[s.jsx(e.strong,{children:"Signature Verification"}),": The module uses ",s.jsx(e.code,{children:"_verifySignature"})," to verify any signatures associated with transactions initiated by the Smart Account."]}),`
`]})]})}function d(i={}){const{wrapper:e}={...r(),...i.components};return e?s.jsx(e,{...i,children:s.jsx(n,{...i})}):n(i)}export{d as default,l as frontmatter};
